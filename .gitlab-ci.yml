---
default:
  interruptible: true

stages:
  - install
  - build
  - publish

include:
  - project: devops/pipelines
    ref: go@1.5.0
    file:
      - /go/install.gitlab-ci.yml
      - /go/lint.gitlab-ci.yml
      - /go/build.gitlab-ci.yml
    inputs:
      version: 1.25-alpine
  - project: devops/pipelines
    ref: semantic-release@1.5.0
    file:
      - /semantic-release/publish.gitlab-ci.yml

install:
  stage: install
  extends:
    - .go-install

lint:
  stage: build
  extends:
    - .go-lint

build:
  stage: build
  extends:
    - .go-build

publish:
  stage: publish
  extends:
    - .semantic-release
